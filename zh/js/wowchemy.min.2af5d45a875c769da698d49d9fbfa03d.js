/*! Wowchemy v5.0.0-beta.2 | https://wowchemy.com/ */
/*! Copyright 2016-present George Cushen (https://georgecushen.com/) */
/*! License: https://github.com/wowchemy/wowchemy-hugo-modules/blob/master/LICENSE.md */

;
(()=>{var e,t,n,s,o,c,h,m,v,b,M=!1,y="production",j=!0;function D(){let e=[];[].push.apply(e,document.getElementsByClassName("language-mermaid"));for(let t=0;t<e.length;t++){let s=e[t],n=document.createElement("div");n.innerHTML=s.innerHTML,n.classList.add("mermaid"),s.parentNode.replaceWith(n)}}function g(e,t=600){e.style.display="",e.style.opacity="0";let s=+new Date,n=function(){e.style.opacity=(+e.style.opacity+(new Date-s)/t).toString(),s=+new Date,+e.style.opacity<1&&(window.requestAnimationFrame&&requestAnimationFrame(n)||setTimeout(n,16))};n()}e=document.body;function _(){return parseInt(localStorage.getItem("wcTheme")||2)}function r(){return Boolean(window.wc.darkLightEnabled)}function z(){if(!r())return console.debug("User theming disabled."),{isDarkTheme:window.wc.isSiteThemeDark,themeMode:window.wc.isSiteThemeDark?1:0};console.debug("User theming enabled.");let t,n=_();switch(console.debug(`User's theme variation: ${n}`),n){case 0:t=!1;break;case 1:t=!0;break;default:window.matchMedia("(prefers-color-scheme: dark)").matches?t=!0:window.matchMedia("(prefers-color-scheme: light)").matches?t=!1:t=window.wc.isSiteThemeDark;break}return t&&!e.classList.contains("dark")?(console.debug("Applying Wowchemy dark theme"),document.body.classList.add("dark")):!t&&e.classList.contains("dark")&&(console.debug("Applying Wowchemy light theme"),document.body.classList.remove("dark")),{isDarkTheme:t,themeMode:n}}function l(e){if(!r()){console.debug("Cannot change theme - user theming disabled.");return}let t;switch(e){case 0:localStorage.setItem("wcTheme","0"),t=!1,console.debug("User changed theme variation to Light.");break;case 1:localStorage.setItem("wcTheme","1"),t=!0,console.debug("User changed theme variation to Dark.");break;default:localStorage.setItem("wcTheme","2"),window.matchMedia("(prefers-color-scheme: dark)").matches?t=!0:window.matchMedia("(prefers-color-scheme: light)").matches?t=!1:t=window.wc.isSiteThemeDark,console.debug("User changed theme variation to Auto.");break}u(t,e)}function T(e){let t=document.querySelector(".js-set-theme-light"),n=document.querySelector(".js-set-theme-dark"),s=document.querySelector(".js-set-theme-auto");if(t===null)return;switch(e){case 0:t.classList.add("dropdown-item-active"),n.classList.remove("dropdown-item-active"),s.classList.remove("dropdown-item-active");break;case 1:t.classList.remove("dropdown-item-active"),n.classList.add("dropdown-item-active"),s.classList.remove("dropdown-item-active");break;default:t.classList.remove("dropdown-item-active"),n.classList.remove("dropdown-item-active"),s.classList.add("dropdown-item-active");break}}function u(t,n=2,s=!1){const o=document.querySelector("link[title=hl-light]"),i=document.querySelector("link[title=hl-dark]"),a=o!==null||i!==null,r=document.querySelector("script[title=mermaid]")!==null;T(n);const c=new CustomEvent("wcThemeChange",{detail:{isDarkTheme:()=>t}});if(document.dispatchEvent(c),!s&&(t===!1&&!e.classList.contains("dark")||t===!0&&e.classList.contains("dark")))return;t===!1?(s||(Object.assign(document.body.style,{opacity:0,visibility:"visible"}),g(document.body,600)),e.classList.remove("dark"),a&&(console.debug("Setting HLJS theme to light"),o&&(o.disabled=!1),i&&(i.disabled=!0)),r&&(console.debug("Initializing Mermaid with light theme"),s?window.mermaid.initialize({startOnLoad:!0,theme:"default",securityLevel:"loose"}):location.reload())):t===!0&&(s||(Object.assign(document.body.style,{opacity:0,visibility:"visible"}),g(document.body,600)),e.classList.add("dark"),a&&(console.debug("Setting HLJS theme to dark"),o&&(o.disabled=!0),i&&(i.disabled=!1)),r&&(console.debug("Initializing Mermaid with dark theme"),s?window.mermaid.initialize({startOnLoad:!0,theme:"dark",securityLevel:"loose"}):location.reload()))}function F(e){if(!r())return;const s=e.matches;console.debug(`OS dark mode preference changed to ${s?"🌒 on":"☀️ off"}.`);let n=_(),t;n===2&&(window.matchMedia("(prefers-color-scheme: dark)").matches?t=!0:window.matchMedia("(prefers-color-scheme: light)").matches?t=!1:t=window.wc.isSiteThemeDark,u(t,n))}console.debug(`Environment: ${y}`);function i(){let t=$("#navbar-main"),e=t.outerHeight();return console.debug("Navbar height: "+e),e}function f(e,t=600){if(e=typeof e=="undefined"||typeof e=="object"?decodeURIComponent(window.location.hash):e,$(e).length){e="#"+$.escapeSelector(e.substring(1));let n=Math.ceil($(e).offset().top-i());$("body").addClass("scrolling"),$("html, body").animate({scrollTop:n},t,function(){$("body").removeClass("scrolling")})}else console.debug("Cannot scroll to target `#"+e+"`. ID not found!")}function p(){let e=$("body"),t=e.data("bs.scrollspy");t&&(t._config.offset=i(),e.data("bs.scrollspy",t),e.scrollspy("refresh"))}function O(){if(window.history.replaceState){let e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.hash;window.history.replaceState({path:e},"",e)}}if(window.addEventListener("hashchange",f),$("#navbar-main li.nav-item a.nav-link, .js-scroll").on("click",function(e){let t=this.hash;if(this.pathname===window.location.pathname&&t&&$(t).length&&$(".js-widget-page").length>0){e.preventDefault();let n=Math.ceil($(t).offset().top-i());$("html, body").animate({scrollTop:n},800)}}),$(document).on("click",".navbar-collapse.show",function(e){let t=$(e.target).is("a")?$(e.target):$(e.target).parent();t.is("a")&&t.attr("class")!="dropdown-toggle"&&$(this).collapse("hide")}),n={},t=$("#container-publications"),t.length){t.isotope({itemSelector:".isotope-item",percentPosition:!0,masonry:{columnWidth:".grid-sizer"},filter:function(){let e=$(this),t=!c||e.text().match(c),n=!s||e.is(s);return t&&n}});let e=$(".filter-search").keyup(k(function(){c=new RegExp(e.val(),"gi"),t.isotope()}));$(".pub-filters").on("change",function(){let o=$(this),e=o[0].getAttribute("data-filter-group");if(n[e]=this.value,s=w(n),t.isotope(),e==="pubtype"){let e=$(this).val();e.substr(0,9)===".pubtype-"?window.location.hash=e.substr(9):window.location.hash=""}})}function k(e,t){let n;return t=t||100,function(){clearTimeout(n);let o=arguments,i=this;function a(){e.apply(i,o)}n=setTimeout(a,t)}}function w(e){let t="";for(let n in e)t+=e[n];return t}function E(){if(!t.length)return;let e=window.location.hash.replace("#",""),o="*";e!=""&&!isNaN(e)&&(o=".pubtype-"+e);let i="pubtype";n[i]=o,s=w(n),t.isotope(),$(".pubtype-select").val(o)}function x(){if($("#map").length){let o=$("#map-provider").val(),e=$("#map-lat").val(),t=$("#map-lng").val(),n=parseInt($("#map-zoom").val()),s=$("#map-dir").val(),i=$("#map-api-key").val();if(o==="google"){let o=new GMaps({div:"#map",lat:e,lng:t,zoom:n,zoomControl:!0,zoomControlOpt:{style:"SMALL",position:"TOP_LEFT"},streetViewControl:!1,mapTypeControl:!1,gestureHandling:"cooperative"});o.addMarker({lat:e,lng:t,click:function(){let n="https://www.google.com/maps/place/"+encodeURIComponent(s)+"/@"+e+","+t+"/";window.open(n,"_blank")},title:s})}else{let a=new L.map("map").setView([e,t],n);o==="mapbox"&&i.length?L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery \xA9 <a href="http://mapbox.com">Mapbox</a>',tileSize:512,maxZoom:18,zoomOffset:-1,id:"mapbox/streets-v11",accessToken:i}).addTo(a):L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(a);let r=L.marker([e,t]).addTo(a),c=e+","+t+"#map="+n+"/"+e+"/"+t+"&layers=N";r.bindPopup(s+'<p><a href="https://www.openstreetmap.org/directions?engine=osrm_car&route='+c+'">Routing via OpenStreetMap</a></p>')}}}function C(e,t){y==="production"&&$.getJSON("https://api.github.com/repos/"+t+"/tags").done(function(t){let n=t[0];$(e).append(" "+n.name)}).fail(function(e,t,n){let s=t+", "+n;console.log("Request Failed: "+s)})}function d(){$("body").hasClass("searching")?($("[id=search-query]").blur(),$("body").removeClass("searching compensate-for-scrollbar"),O(),$("#fancybox-style-noscroll").remove()):(!$("#fancybox-style-noscroll").length&&document.body.scrollHeight>window.innerHeight&&($("head").append('<style id="fancybox-style-noscroll">.compensate-for-scrollbar{margin-right:'+(window.innerWidth-document.documentElement.clientWidth)+"px;}</style>"),$("body").addClass("compensate-for-scrollbar")),$("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").focus())}function a(){$(".carousel").each(function(){let e=$(".carousel-item",this);e.css("min-height",0);let t=Math.max.apply(null,e.map(function(){return $(this).outerHeight()}).get());e.css("min-height",t+"px")})}function A(){$("#TableOfContents").addClass("nav flex-column"),$("#TableOfContents li").addClass("nav-item"),$("#TableOfContents li a").addClass("nav-link"),$("input[type='checkbox'][disabled]").parents("ul").addClass("task-list")}function S(e){return Array.prototype.filter.call(e.parentNode.children,function(t){return t!==e})}$(document).ready(function(){A(),D(),M&&hljs.initHighlighting();let{isDarkTheme:e,themeMode:t}=z();u(e,t,!0)}),$(window).on("load",function(){let t=document.querySelectorAll(".projects-container"),s=t.length,n=0;t.forEach(function(e,t){console.debug(`Loading Isotope instance ${t}`);let a,n=e.closest("section"),s="";n.querySelector(".isotope").classList.contains("js-layout-row")?s="fitRows":s="masonry";let r=n.querySelector(".default-project-filter"),i="*";r!==null&&(i=r.textContent),console.debug(`Default Isotope filter: ${i}`),imagesLoaded(e,function(){a=new Isotope(e,{itemSelector:".isotope-item",layoutMode:s,masonry:{gutter:20},filter:i});let t=n.querySelectorAll(".project-filters a");t.forEach(e=>e.addEventListener("click",t=>{t.preventDefault();let n=e.getAttribute("data-filter");console.debug(`Updating Isotope filter to ${n}`),a.arrange({filter:n}),e.classList.remove("active"),e.classList.add("active");let s=S(e);s.forEach(e=>{e.classList.remove("active"),e.classList.remove("all")})})),o()})});function o(){n++,n===s&&(console.debug(`All Portfolio Isotope instances loaded.`),window.location.hash&&f(decodeURIComponent(window.location.hash),0))}$(".pub-filters-select")&&E(),$(".js-cite-modal").click(function(e){e.preventDefault();let t=$(this).attr("data-filename"),n=$("#modal");n.find(".modal-body code").load(t,function(e,n,s){if(n=="error"){let e="Error: ";$("#modal-error").html(e+s.status+" "+s.statusText)}else $(".js-download-cite").attr("href",t)}),n.modal("show")}),$(".js-copy-cite").click(function(e){e.preventDefault();let t=document.createRange(),n=document.querySelector("#modal .modal-body");t.selectNode(n),window.getSelection().addRange(t);try{document.execCommand("copy")}catch{console.log("Error: citation copy failed.")}window.getSelection().removeRange(t)}),x();let e=".js-github-release";$(e).length>0&&C(e,$(e).data("repo")),document.addEventListener("keyup",e=>{if(e.code==="Escape"){const e=document.body;e.classList.contains("searching")&&d()}if(e.key==="/"){let t=document.hasFocus()&&document.activeElement!==document.body&&document.activeElement!==document.documentElement&&document.activeElement||null,n=t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement;j&&!n&&(e.preventDefault(),d())}}),j&&$(".js-search").click(function(e){e.preventDefault(),d()}),$('[data-toggle="tooltip"]').tooltip(),p()}),m=document.querySelector(".js-set-theme-light"),h=document.querySelector(".js-set-theme-dark"),o=document.querySelector(".js-set-theme-auto"),m&&h&&o&&(m.addEventListener("click",e=>{e.preventDefault(),l(0)}),h.addEventListener("click",e=>{e.preventDefault(),l(1)}),o.addEventListener("click",e=>{e.preventDefault(),l(2)})),b=window.matchMedia("(prefers-color-scheme: dark)"),b.addEventListener("change",e=>{F(e)}),window.addEventListener("load",a),window.addEventListener("resize",a),window.addEventListener("orientationchange",a),$("body").on("mouseenter mouseleave",".dropdown",function(e){var t=$(e.target).closest(".dropdown"),n=$(".dropdown-menu",t);t.addClass("show"),n.addClass("show"),setTimeout(function(){t[t.is(":hover")?"addClass":"removeClass"]("show"),n[t.is(":hover")?"addClass":"removeClass"]("show")},300)}),$(window).resize(function(){clearTimeout(v),v=setTimeout(p,200)})})(),(()=>{var o={authors:"",event:"演讲",post:"文章",project:"项目",publication:"出版物",slides:""},i={no_results:"没有找到结果",placeholder:"搜索...",results:"搜索结果"},t={indexURI:"/index.json",minLength:1,threshold:.3},n={shouldSort:!0,includeMatches:!0,tokenize:!0,threshold:t.threshold,location:0,distance:100,maxPatternLength:32,minMatchCharLength:t.minLength,keys:[{name:"title",weight:.99},{name:"summary",weight:.6},{name:"authors",weight:.5},{name:"content",weight:.2},{name:"tags",weight:.5},{name:"categories",weight:.5}]},e=60;function a(e){return decodeURIComponent((location.search.split(e+"=")[1]||"").split("&")[0]).replace(/\+/g," ")}function r(e){history.replaceState&&window.history.replaceState({path:e},"",e)}function s(e,t){let s=$("#search-query").val();if(s.length<1&&($("#search-hits").empty(),$("#search-common-queries").show()),!e&&s.length<n.minMatchCharLength)return;$("#search-hits").empty(),$("#search-common-queries").hide(),c(s,t);let o=window.location.protocol+"//"+window.location.host+window.location.pathname+"?q="+encodeURIComponent(s)+window.location.hash;r(o)}function c(e,t){let n=t.search(e);n.length>0?($("#search-hits").append('<h3 class="mt-0">'+n.length+" "+i.results+"</h3>"),l(e,n)):$("#search-hits").append('<div class="search-no-results">'+i.no_results+"</div>")}function l(t,s){$.each(s,function(s,i){let a=i.item.section,r="",c="",l=[];["publication","event"].includes(a)?r=i.item.summary:r=i.item.content,n.tokenize?l.push(t):$.each(i.matches,function(t,n){if(n.key=="content"){let t=n.indices[0][0]-e>0?n.indices[0][0]-e:0,s=n.indices[0][1]+e<r.length?n.indices[0][1]+e:r.length;c+=r.substring(t,s),l.push(n.value.substring(n.indices[0][0],n.indices[0][1]-n.indices[0][0]+1))}}),c.length<1&&(c+=i.item.summary);let u=$("#search-hit-fuse-template").html();a in o&&(a=o[a]);let h={key:s,title:i.item.title,type:a,relpermalink:i.item.relpermalink,snippet:c},m=d(u,h);$("#search-hits").append(m),$.each(l,function(e,t){$("#summary-"+s).mark(t)})})}function d(e,t){let n,s,o;for(n in t)s="\\{\\{\\s*"+n+"\\s*\\}\\}",o=new RegExp(s,"g"),e=e.replace(o,t[n]);return e}typeof Fuse=="function"&&$.getJSON(t.indexURI,function(e){let t=new Fuse(e,n),o=a("q");o&&($("body").addClass("searching"),$(".search-results").css({opacity:0,visibility:"visible"}).animate({opacity:1},200),$("#search-query").val(o),$("#search-query").focus(),s(!0,t)),$("#search-query").keyup(function(e){clearTimeout($.data(this,"searchTimer")),e.keyCode==13?s(!0,t):$(this).data("searchTimer",setTimeout(function(){s(!1,t)},250))})})})()